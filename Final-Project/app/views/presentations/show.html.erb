<div class="presentation-container">
  <h1 class="presentation-title"><%= @presentation.title %></h1>
  <p class="presentation-meta"><strong>Presenters:</strong> <%= @presentation.user.name %></p>
  <p class="presentation-meta"><strong>Date:</strong> <%= @presentation.date.strftime("%B %d, %Y") %></p>
  <p class="presentation-description"><strong>Description:</strong> <%= @presentation.description %></p>

  <% if @is_teacher %>
    <div class="teacher-section">
      <h2 class="section-title">Submit Final Grade</h2>
      <%= form_with model: [@presentation, Evaluation.new], local: true, class: "grade-form" do |f| %>
        <div class="form-group">
          <%= f.label :score, "Grade", class: "form-label" %><br>
          <%= f.number_field :score, min: 0, max: 100, class: "form-input" %>
        </div>
        <div class="form-group">
          <%= f.label :comment, "Comment", class: "form-label" %><br>
          <%= f.text_area :comment, class: "form-textarea" %>
        </div>
        <div class="form-group">
          <%= f.submit "Submit Grade", class: "form-submit" %>
        </div>
      <% end %>
    </div>
  <% elsif @is_student %>
    <% if @evaluation_exists %>
      <p class="info-text">You have already submitted an evaluation.</p>
    <% else %>
      <div class="student-section">
        <h2 class="section-title">Submit Your Evaluation</h2>
        <%= form_with model: [@presentation, Evaluation.new], local: true, class: "evaluation-form" do |f| %>
          <div class="form-group">
            <%= f.label :score, "Score", class: "form-label" %><br>
            <%= f.number_field :score, min: 0, max: 100, class: "form-input" %>
          </div>
          <div class="form-group">
            <%= f.label :comment, "Comment", class: "form-label" %><br>
            <%= f.text_area :comment, class: "form-textarea" %>
          </div>
          <div class="form-group">
            <%= f.submit "Submit Evaluation", class: "form-submit" %>
          </div>
        <% end %>
      </div>
    <% end %>
  <% end %>

  <% if current_user.teacher? || current_user == @presentation.user %>
    <div class="delete-section">
      <%= button_to "Delete Presentation", presentation_path(@presentation), method: :delete, class: "delete-button", data: { confirm: "Are you sure you want to delete this presentation?" } %>
    </div>
  <% end %>

  <div class="evaluations-section">
    <h2 class="section-title">Student Evaluations</h2>
    <ul class="evaluation-list">
      <% @evaluations.each do |evaluation| %>
        <li class="evaluation-item">
          <strong><%= evaluation.user.name %>:</strong> 
          <span>Score: <%= evaluation.score %></span> - 
          <span>Comment: <%= evaluation.comment %></span>
        </li>
      <% end %>
    </ul>
  </div>
</div>
